// CUP specification for a simple expression evaluator (w/ actions)

import java_cup.runtime.*;
import java.util.Vector;
import java.io.*;
/*
-----------------------------------------------------------------------
-                                types                                -
-----------------------------------------------------------------------
*/
terminal PROC,STRUCT, MAIN, INT, CHAR, FLOAT,STRING, BOOL, LIST, POINTER, CLASS;
/*
-----------------------------------------------------------------------
-                             opareators                              -
-----------------------------------------------------------------------
*/
terminal MULT, MOD, MIN, DIV, NOT, AND, TRUE, FALSE, NULL,INF, PLUS, SUP, OR;
terminal EQ, EQUALS, GEQL, LEQL, DIFF;
/*
-----------------------------------------------------------------------
-                             separators                              -
-----------------------------------------------------------------------
*/
terminal LPAR,RPAR,SEMIC,NEWBLOCK,ENDBLOCK, COMMA; 
terminal IF, ELSE, WHILE, EXIT, RETURN;
/*
-----------------------------------------------------------------------
-                              specials                               -
-----------------------------------------------------------------------
*/
terminal String STR; 
terminal String ID;
terminal Integer NB;



/* The grammar */
non terminal expr, term, factor;
non terminal axiom, axioms, keyword, type, complextype;

precedence left OR,AND;
precedence left PLUS, MIN;
precedence left MULT, DIV, MOD;
precedence nonassoc EQUALS, DIFF, LEQL , GEQL , INF , SUP ,NOT; 




start with axioms;

axioms ::=	axiom:t1 axioms:t2 {}
    | axiom:t {}
    ;

axiom ::= expr:t SEMIC           {: System.out.println("axiom -> expr SEMIC"); :}
	| keyword:t SEMIC            {: System.out.println("axiom -> keyword SEMIC"); :}
	| type:t SEMIC               {: System.out.println("axiom -> type SEMIC"); :}
	| complextype:t SEMIC        {: System.out.println("axiom -> complextype SEMIC"); :}
    ;

expr ::= expr:t1 PLUS term:t2    {: System.out.println("expr -> expr + term"); :}
    | term:t                     {: System.out.println("expr -> term"); :}
    ;

term ::= term:t1 MULT  factor:t2 {: System.out.println("terme -> terme MULT facteur"); :}
    | factor:t                   {: System.out.println("terme -> facteur"); :}
    ;

factor ::= LPAR expr:t  RPAR     {: System.out.println("factor -> LPAR expr RPAR"); :}
    | ID:t                       {: System.out.println("factor -> ID"); :}
    ;

keyword ::=	PROC:t               {: System.out.println("keyword -> procedure"); :}
		| MAIN:t                 {: System.out.println("keyword -> main"); :}
		;
/*
-----------------------------------------------------------------------
-                           possible types                            -
-----------------------------------------------------------------------
*/
type ::= INT:t                   {: System.out.println("type -> integer"); :}
    | CHAR:t                     {: System.out.println("type -> character"); :}
    | FLOAT:t                    {: System.out.println("type -> float"); :}
    | BOOL:t                     {: System.out.println("type -> boolean"); :}
    | STR:t                      {: System.out.println("type -> string"); :}
    ;

complextype ::= CLASS:t          {: System.out.println("complextype -> class"); :}
    | LIST:t                     {: System.out.println("complextype -> list of"); :}
    | POINTER:t                  {: System.out.println("complextype -> ^"); :}
    | STRUCT:t                   {: System.out.println("complextype -> structure"); :}
    | PROC:t                     {: System.out.println("complextype -> procedure"); :}
    ;
